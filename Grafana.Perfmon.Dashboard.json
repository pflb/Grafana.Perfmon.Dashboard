{
  "__inputs": [],
  "__requires": [
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "4.3.1"
    },
    {
      "type": "panel",
      "id": "graph",
      "name": "Graph",
      "version": ""
    },
    {
      "type": "panel",
      "id": "text",
      "name": "Text",
      "version": ""
    }
  ],
  "annotations": {
    "list": []
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 2,
  "hideControls": false,
  "id": null,
  "links": [],
  "refresh": "1m",
  "rows": [
    {
      "collapse": true,
      "height": 250,
      "panels": [
        {
          "content": "% загруженности процессора - это доля времени, которую процессор тратит на обработку всех потоков команд, кроме простаивающего. Это значение равно разнице между 100 % и процентом времени, которое процессор затрачивает на выполнение простаивающего потока. (Простаивающий поток команд занимает рабочее время процессора в отсутствие других потоков команд.) Этот счётчик является основным показателем загруженности процессора. Он показывает среднее значение занятости процессора в течение интервала измерения. Определение того, простаивает ли процессор, выполняется за внутренний интервал опроса по системным часам (10 мсек). Поэтому для современных быстрых процессоров этот счётчик может занижать использование процессора, так как процессор может затрачивать много времени на обслуживание потоков между опросами по системным часам.  Примеры приложений, для которых более вероятно неточное измерение, - таймерные приложения, основанные на загрузке, так как таймеры получают сигнал сразу же после измерения.",
          "id": 2,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Processor Time",
          "type": "text"
        },
        {
          "content": "'% работы в привилегированном режиме' - это доля времени, которое поток команд процессора потратил на исполнение кода в привилегированном режиме. При вызове системных служб Windows они часто исполняются в привилегированном режиме для того, чтобы получить доступ к критическим системным данным. Такие данные защищены от доступа потоков команд, исполняемых в пользовательском режиме. Вызовы к системе могут быть явными или неявными, например при ошибках вызова страниц памяти или обработке прерываний. В отличие от операционных систем предыдущих поколений, в дополнение к обычным способам защиты системы путём разделения пользовательских и привилегированных режимов работы, Windows использует границы процессов для защиты подсистем. При этом результаты работы Windows по обработке приложений может появляться в процессах других подсистем в дополнение к привилегированному времени процессов.",
          "id": 3,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Privileged Time",
          "type": "text"
        },
        {
          "content": "Процент времени работы в пользовательском режиме - это процент времени работы процессора, которое он находился в пользовательском режиме. (Пользовательский режим является ограниченным режимом работы процессора. В пользовательском режиме работают приложения, подсистемы обеспечения среды (например, Win32, POSIX) и интегрируемые подсистемы. Наоборот, привилегированный режим разработан для компонентов операционной системы и позволяет напрямую обращаться к аппаратуре и всей памяти. Операционная система переключает потоки приложений в привилегированный режим для доступа к службам операционной системы.) Этот счётчик отображает средний процент времени занятости процессора по отношению ко всему времени образца.",
          "id": 4,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% User Time",
          "type": "text"
        },
        {
          "content": "'% времени прерываний' - время, которое процессор тратит на получение и обслуживание аппаратных прерываний в течение интервала выборки. Эта величина является косвенным показателем активности устройств, формирующих аппаратные прерывания, таких как системного таймера, мыши, драйверов дисков, линий передачи данных, сетевых адаптеров и других периферийных устройств. Эти устройства обычно прерывают работу процессора при завершении своей работы или при возникновении необходимости обработки запроса. При этом обычное выполнение потока команд приостанавливается. Системный таймер обычно прерывает работу процессора каждые 10 миллисекунд, создавая 'фон' аппаратных прерываний. Поэтому эта величина отображает разницу между значениями последних двух выборок, поделённую на длительность интервала выборки.\n",
          "id": 23,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Interrupt Time Counter",
          "type": "text"
        }
      ],
      "repeat": null,
      "repeatIteration": null,
      "repeatRowId": null,
      "showTitle": true,
      "title": "Описание метрик",
      "titleSize": "h6"
    },
    {
      "collapse": true,
      "height": "500",
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "decimals": 1,
          "fill": 1,
          "id": 10,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": false,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "% Processor Time (percentile)",
              "color": "#7EB26D",
              "fill": 2
            },
            {
              "alias": "% Processor Time (mean)",
              "color": "#3F6833",
              "fill": 6,
              "linewidth": 3
            }
          ],
          "spaceLength": 10,
          "span": 9,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "% Processor Time (percentile)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "query": "SELECT percentile(\"Percent_Processor_Time\", $percentile) FROM \"autogen\".\"win_cpu\" WHERE \"instance\" = '_Total' AND $timeFilter GROUP BY time($stepInterval) fill(none)",
              "rawQuery": false,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Processor_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [
                      "$percentile"
                    ],
                    "type": "percentile"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            },
            {
              "alias": "% Processor Time (mean)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Processor_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 80
            },
            {
              "colorMode": "critical",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 90
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor(_Total): $percentile-перцентиль и среднее значение от \"% Processor Time\"",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percent",
              "label": "",
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            },
            {
              "format": "percent",
              "label": null,
              "logBase": 2,
              "max": null,
              "min": null,
              "show": false
            }
          ]
        },
        {
          "content": "Для серверов приложений значение не должно превышать 80-90%.\n\nПроблема с CPU есть, если при высоком «**% Processor Time**» растёт «**% Privileged Time**» или «**\\System\\Processor Queue Length**». Если связанные метрики не растут, то значит процессор работает на полную мощность, но не является узким местом – пока справляется.\n",
          "id": 5,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Processor Time",
          "type": "text"
        },
        {
          "aliasColors": {
            "win_system.Processor_Queue_Length": "#EF843C"
          },
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "fill": 1,
          "id": 26,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": true,
            "min": false,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "span": 9,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "CPU Queue Length",
              "dsType": "influxdb",
              "groupBy": [],
              "measurement": "win_system",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Processor_Queue_Length"
                    ],
                    "type": "field"
                  }
                ]
              ],
              "tags": []
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor Queue Length",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": false
            }
          ]
        }
      ],
      "repeat": null,
      "repeatIteration": null,
      "repeatRowId": null,
      "showTitle": true,
      "title": "Утилизация процессора, $percentile перцентиль и среднее значение от \"% Processor Time\"",
      "titleSize": "h6"
    },
    {
      "collapse": true,
      "height": "500",
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "decimals": 1,
          "fill": 1,
          "id": 11,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": false,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "% Processor Time (percentile)",
              "color": "#7EB26D",
              "fill": 0
            },
            {
              "alias": "% Privileged Time (percentile)",
              "color": "#CCA300",
              "fill": 4,
              "linewidth": 3
            }
          ],
          "spaceLength": 10,
          "span": 9,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "% Processor Time (percentile)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Processor_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [
                      95
                    ],
                    "type": "percentile"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            },
            {
              "alias": "% Privileged Time (percentile)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Privileged_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [
                      95
                    ],
                    "type": "percentile"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 80
            },
            {
              "colorMode": "critical",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 90
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor(_Total) / % Processor Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percent",
              "label": "",
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            },
            {
              "format": "percent",
              "label": null,
              "logBase": 2,
              "max": null,
              "min": null,
              "show": true
            }
          ]
        },
        {
          "content": "Значение выше 75% часто указывает, что CPU является узким местом. \n\nЕсли тестируемый модуль работает непрерывно, то достаточно мониторить общую метрику, иначе нужна метрика «Process(*)\\% Privileged Time». \nТакже интересно мониторить отношение «% Privileged Time» к «% Processor Time». Существенные скачки этого отношения указывают на изменения в нагрузке, влияющие на производительность, на вероятные узкие места.\n",
          "id": 6,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Privileged Time",
          "type": "text"
        },
        {
          "aliasColors": {
            "Privileged_Time / Processor_Time": "#F4D598",
            "Линия тренда": "#705DA0"
          },
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "decimals": 1,
          "description": "Интересно мониторить отношение «% Privileged Time» к «% Processor Time». Существенные скачки этого отношения указывают на изменения в нагрузке, влияющие на производительность, на вероятные узкие места.",
          "fill": 1,
          "id": 22,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": false,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Линия тренда",
              "fill": 0,
              "linewidth": 3
            }
          ],
          "spaceLength": 10,
          "span": 9,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Privileged_Time / Processor_Time",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$__interval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "orderByTime": "ASC",
              "policy": "default",
              "query": "select \"Percent_Privileged_Time\" / \"Percent_Processor_Time\" FROM autogen.win_cpu WHERE \"instance\" = '_Total' AND $timeFilter fill(none)\n",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "value"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": []
            },
            {
              "alias": "Линия тренда",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "auto"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "query": "select mean(c) from (select \"Percent_Privileged_Time\" / \"Percent_Processor_Time\" as c FROM autogen.win_cpu WHERE \"instance\" = '_Total' AND $timeFilter fill(none)) where $timeFilter group by time($stepInterval)\n",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Privileged_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 75
            },
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 80
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor(_Total): \"% Privileged Time\" / \"% Processor Time\"",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percentunit",
              "label": "",
              "logBase": 1,
              "max": "1",
              "min": "0",
              "show": true
            },
            {
              "format": "percent",
              "label": null,
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": false
            }
          ]
        },
        {
          "content": "Отношение «% Privileged Time» к «% Processor Time». Существенные скачки этого отношения указывают на изменения в нагрузке, влияющие на производительность, на вероятные узкие места.\n",
          "id": 18,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Privileged Time",
          "type": "text"
        }
      ],
      "repeat": null,
      "repeatIteration": null,
      "repeatRowId": null,
      "showTitle": true,
      "title": "Privileged Time",
      "titleSize": "h6"
    },
    {
      "collapse": true,
      "height": "500",
      "panels": [
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "decimals": 1,
          "fill": 1,
          "id": 8,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": false,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": false,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "% Privileged Time (среднее)",
              "color": "#E5AC0E",
              "fill": 6,
              "linewidth": 4,
              "stack": true
            },
            {
              "alias": "% User Time (среднее)",
              "color": "#64B0C8",
              "fill": 6,
              "linewidth": 4,
              "stack": true
            },
            {
              "alias": "/% Processor Time .*/",
              "bars": false,
              "color": "#508642",
              "fill": 0,
              "lines": true,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "span": 9,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "% User Time (среднее)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "hide": false,
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "C",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_User_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            },
            {
              "alias": "% Privileged Time (среднее)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Privileged_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            },
            {
              "alias": "% Processor Time ($percentile-перцентиль)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Processor_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [
                      "$percentile"
                    ],
                    "type": "percentile"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 80
            },
            {
              "colorMode": "critical",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 90
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor(_Total): \"% User Time\" дополняет метрику \"% Privileged Time\" - сумма средних значений для шага $stepInterval",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percent",
              "label": null,
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            },
            {
              "format": "percent",
              "label": null,
              "logBase": 2,
              "max": null,
              "min": null,
              "show": false
            }
          ]
        },
        {
          "content": "Метрика «% User Time» дополняет метрику «% Privileged Time». Сумма их средних значений близка к «% Processor Time». Если полная загрузка превышает 80-90%, то это может указывать на проблемы производительности.",
          "id": 7,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% User Time",
          "type": "text"
        },
        {
          "aliasColors": {
            "User Time / % Processor Time": "#F9BA8F"
          },
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "decimals": 1,
          "description": "",
          "fill": 1,
          "id": 20,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": false,
            "max": true,
            "min": true,
            "show": true,
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "User Time / % Processor Time",
              "color": "#705DA0",
              "linewidth": 3,
              "yaxis": 1
            },
            {
              "alias": "mean(% User Time)",
              "color": "#447EBC",
              "fill": 4,
              "linewidth": 3,
              "yaxis": 2
            },
            {
              "alias": "mean(% Processor Time)",
              "color": "#629E51",
              "fill": 0,
              "yaxis": 2
            }
          ],
          "spaceLength": 10,
          "span": 9,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "User Time / % Processor Time",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "auto"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "none"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "query": "SELECT Percent_User_Time / Percent_Processor_Time FROM autogen.win_cpu WHERE instance = '_Total' AND $timeFilter fill(none)",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Privileged_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            },
            {
              "alias": "mean(% User Time)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_User_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            },
            {
              "alias": "mean(% Processor Time)",
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "C",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Processor_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [],
                    "type": "mean"
                  }
                ]
              ],
              "tags": [
                {
                  "key": "instance",
                  "operator": "=",
                  "value": "_Total"
                }
              ]
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 0.8
            },
            {
              "colorMode": "critical",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 0.9
            },
            {
              "colorMode": "ok",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 0.25
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor(_Total): \"% User Time\" / \"% Processor Time\"",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percentunit",
              "label": null,
              "logBase": 1,
              "max": "1",
              "min": "0",
              "show": true
            },
            {
              "format": "percent",
              "label": null,
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            }
          ]
        },
        {
          "content": "Метрика дополняет метрику «\\% Privileged Time». Поэтому если значение начало падать ниже 25% и отношение метрики к полному значению «\\% Processor Time» также падает, то в момент падения происходит некий переломный момент в нагрузке. Возможно, тут начинается деградация производительности, связанная с процессором, как с узким местом – нужно изучить причины.",
          "id": 21,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% User Time",
          "type": "text"
        }
      ],
      "repeat": null,
      "repeatIteration": null,
      "repeatRowId": null,
      "showTitle": true,
      "title": "Утилизация процессора, сумма \"% Privileged Time\" и \"% User Time\"",
      "titleSize": "h6"
    },
    {
      "collapse": true,
      "height": "500",
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "decimals": null,
          "fill": 0,
          "id": 13,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "avg",
            "sortDesc": false,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 2,
          "points": true,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "win_cpu.percentile {instance: _Total}",
              "legend": false
            }
          ],
          "spaceLength": 10,
          "span": 9,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "dsType": "influxdb",
              "groupBy": [
                {
                  "params": [
                    "$stepInterval"
                  ],
                  "type": "time"
                },
                {
                  "params": [
                    "instance"
                  ],
                  "type": "tag"
                },
                {
                  "params": [
                    "null"
                  ],
                  "type": "fill"
                }
              ],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "default",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Processor_Time"
                    ],
                    "type": "field"
                  },
                  {
                    "params": [
                      "$percentile"
                    ],
                    "type": "percentile"
                  }
                ]
              ],
              "tags": []
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 80
            },
            {
              "colorMode": "critical",
              "fill": false,
              "line": true,
              "op": "gt",
              "value": 90
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Processor(*): перцентиль ($percentile) от \"% Processor Time\" с разбивкой по ядрам/процессорам",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percent",
              "label": "",
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": false
            }
          ]
        },
        {
          "content": "Если загружено только одно ядро, то приложения не задействуют возможности многопроцессорности. Или все приложения привязаны к одному ядру. Оптимальная картина - равномерная загрузка ядер/процессоров.",
          "id": 17,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Processor Time по ядрам",
          "type": "text"
        }
      ],
      "repeat": "percentile",
      "repeatIteration": null,
      "repeatRowId": null,
      "showTitle": true,
      "title": "Загрузка процессора с разбивкой по ядрам/процессорам",
      "titleSize": "h6"
    },
    {
      "collapse": true,
      "height": "500",
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "$datasource",
          "fill": 1,
          "id": 24,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": false,
            "max": true,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "percentage": false,
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "span": 9,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "% времени прерываний",
              "dsType": "influxdb",
              "groupBy": [],
              "measurement": "win_cpu",
              "orderByTime": "ASC",
              "policy": "autogen",
              "refId": "A",
              "resultFormat": "time_series",
              "select": [
                [
                  {
                    "params": [
                      "Percent_Interrupt_Time"
                    ],
                    "type": "field"
                  }
                ]
              ],
              "tags": []
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeShift": null,
          "title": "% времени прерываний",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "percent",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": false
            }
          ]
        },
        {
          "content": "Резкое увеличение этого значения указывает на потенциальную проблему с оборудованием. Возможно, какое-то устройство работает неправильно.\nУзнать какое именно устройство работает неправильно можно по данным мониторинга «NT Kernel» поставщик данных «Отслеживание ядра Windows», свойство «isr» (прерывания). Мониторинг «NT Kernel» сам по себе требует ресурсов, поэтому его включают при необходимости.\n",
          "description": "",
          "id": 25,
          "links": [],
          "mode": "markdown",
          "span": 3,
          "title": "% Interrupt Time",
          "type": "text"
        }
      ],
      "repeat": null,
      "repeatIteration": null,
      "repeatRowId": null,
      "showTitle": true,
      "title": "Аппаратные прерывания",
      "titleSize": "h6"
    }
  ],
  "schemaVersion": 14,
  "style": "dark",
  "tags": [],
  "templating": {
    "list": [
      {
        "auto": false,
        "auto_count": 30,
        "auto_min": "10s",
        "current": {
          "text": "1m",
          "value": "1m"
        },
        "hide": 0,
        "label": "stepInterval",
        "name": "stepInterval",
        "options": [
          {
            "selected": false,
            "text": "1s",
            "value": "1s"
          },
          {
            "selected": false,
            "text": "5s",
            "value": "5s"
          },
          {
            "selected": false,
            "text": "10s",
            "value": "10s"
          },
          {
            "selected": false,
            "text": "30s",
            "value": "30s"
          },
          {
            "selected": true,
            "text": "1m",
            "value": "1m"
          },
          {
            "selected": false,
            "text": "5m",
            "value": "5m"
          },
          {
            "selected": false,
            "text": "10m",
            "value": "10m"
          },
          {
            "selected": false,
            "text": "30m",
            "value": "30m"
          },
          {
            "selected": false,
            "text": "1h",
            "value": "1h"
          }
        ],
        "query": "1s,5s,10s,30s,1m,5m,10m,30m,1h",
        "refresh": 2,
        "type": "interval"
      },
      {
        "allValue": null,
        "current": {
          "text": "95",
          "value": "95"
        },
        "hide": 0,
        "includeAll": false,
        "label": "percentile",
        "multi": false,
        "name": "percentile",
        "options": [
          {
            "selected": false,
            "text": "50",
            "value": "50"
          },
          {
            "selected": false,
            "text": "60",
            "value": "60"
          },
          {
            "selected": false,
            "text": "70",
            "value": "70"
          },
          {
            "selected": false,
            "text": "80",
            "value": "80"
          },
          {
            "selected": false,
            "text": "90",
            "value": "90"
          },
          {
            "selected": true,
            "text": "95",
            "value": "95"
          },
          {
            "selected": false,
            "text": "96",
            "value": "96"
          },
          {
            "selected": false,
            "text": "97",
            "value": "97"
          },
          {
            "selected": false,
            "text": "98",
            "value": "98"
          },
          {
            "selected": false,
            "text": "99",
            "value": "99"
          },
          {
            "selected": false,
            "text": "100",
            "value": "100"
          }
        ],
        "query": "50,60,70,80,90,95,96,97,98,99,100",
        "type": "custom"
      },
      {
        "current": {
          "tags": [],
          "text": "telegraf",
          "value": "telegraf"
        },
        "hide": 0,
        "label": "datasource",
        "name": "datasource",
        "options": [],
        "query": "influxdb",
        "refresh": 1,
        "regex": "",
        "type": "datasource"
      }
    ]
  },
  "time": {
    "from": "now-5m",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options": [
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "timezone": "browser",
  "title": "telegraf",
  "version": 3
}